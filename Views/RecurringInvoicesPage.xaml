<Page
    x:Class="App_3.Views.RecurringInvoicesPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App_3.Models"
    xmlns:Model="using:App_3.Models"
    xmlns:conv="using:App_3.Converters"
    Background="#F3F4F6">

    <Page.Resources>
        <conv:RecurringStatusToColorConverter x:Key="RecurringStatusToColorConverter"/>
        <conv:RecurringStatusToForegroundConverter x:Key="RecurringStatusToForegroundConverter"/>
    </Page.Resources>

    <ScrollViewer>
        <StackPanel Padding="24" Spacing="24">

            <!-- HEADER -->
            <Grid>
                <TextBlock Text="Recurring Invoices" FontSize="32" FontWeight="Bold"/>
                <Button Content="+ Add Recurring Invoice" HorizontalAlignment="Right" Background="#2563EB" Foreground="White" CornerRadius="8" Padding="12,6"/>
            </Grid>

            <!-- SUMMARY CARDS -->
            <Grid ColumnSpacing="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Border Background="White" CornerRadius="16" Padding="20">
                    <StackPanel Spacing="6">
                        <TextBlock Text="Total Templates" Foreground="#64748B"/>
                        <TextBlock Text="12" FontSize="22" FontWeight="Bold" Foreground="#15803D"/>
                    </StackPanel>
                </Border>

                <Border Grid.Column="1" Background="White" CornerRadius="16" Padding="20">
                    <StackPanel Spacing="6">
                        <TextBlock Text="Next Invoice Date" Foreground="#64748B"/>
                        <TextBlock Text="25/12/2025" FontSize="22" FontWeight="Bold" Foreground="#15803D"/>
                    </StackPanel>
                </Border>

                <Border Grid.Column="2" Background="White" CornerRadius="16" Padding="20">
                    <StackPanel Spacing="6">
                        <TextBlock Text="Total Invoice Value" Foreground="#64748B"/>
                        <TextBlock Text="â‚¹ 45,000" FontSize="22" FontWeight="Bold" Foreground="#15803D"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- FILTER -->
            <Grid ColumnSpacing="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="200"/>
                </Grid.ColumnDefinitions>

                <TextBox x:Name="SearchBox" PlaceholderText="Search Customer / Template" Padding="12,6"/>
                <ComboBox x:Name="StatusFilter" Grid.Column="1">
                    <ComboBoxItem Content="All"/>
                    <ComboBoxItem Content="Active"/>
                    <ComboBoxItem Content="Paused"/>
                    <ComboBoxItem Content="Completed"/>
                </ComboBox>
                <ComboBox x:Name="FrequencyFilter" Grid.Column="2">
                    <ComboBoxItem Content="All"/>
                    <ComboBoxItem Content="Daily"/>
                    <ComboBoxItem Content="Weekly"/>
                    <ComboBoxItem Content="Monthly"/>
                    <ComboBoxItem Content="Quarterly"/>
                </ComboBox>
            </Grid>

            <!-- TABLE -->
            <Border Background="White" CornerRadius="16" Padding="20">
                <StackPanel Spacing="12">

                    <TextBlock Text="Recurring Templates"
                   FontSize="16"
                   FontWeight="SemiBold"/>

                    <!-- HORIZONTAL SCROLL ONLY -->
                    <ScrollViewer
            HorizontalScrollBarVisibility="Auto"
            VerticalScrollBarVisibility="Disabled">

                        <!-- TABLE WRAPPER -->
                        <StackPanel MinWidth="1050">

                            <!-- HEADER -->
                            <Grid Background="#F3F4F6"
                      Padding="12"
                      ColumnSpacing="16">

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="200"/>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="140"/>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="260"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Text="Customer" FontWeight="Bold"/>
                                <TextBlock Text="Template Name" Grid.Column="1" FontWeight="Bold"/>
                                <TextBlock Text="Amount" Grid.Column="2" FontWeight="Bold"/>
                                <TextBlock Text="Frequency" Grid.Column="3" FontWeight="Bold"/>
                                <TextBlock Text="Next Invoice" Grid.Column="4" FontWeight="Bold"/>
                                <TextBlock Text="Status" Grid.Column="5" FontWeight="Bold" HorizontalAlignment="Center"/>
                                <TextBlock Text="Actions" Grid.Column="6" FontWeight="Bold" HorizontalAlignment="Right"/>
                            </Grid>

                            <!-- ROWS -->
                            <ItemsControl x:Name="RecurringInvoicesItemsControl">
                                <ItemsControl.ItemTemplate>


                                    <DataTemplate>

                                        <Grid Padding="12"
                                  ColumnSpacing="16"
                                  VerticalAlignment="Center">

                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="180"/>
                                                <ColumnDefinition Width="200"/>
                                                <ColumnDefinition Width="120"/>
                                                <ColumnDefinition Width="120"/>
                                                <ColumnDefinition Width="140"/>
                                                <ColumnDefinition Width="120"/>
                                                <ColumnDefinition Width="260"/>
                                            </Grid.ColumnDefinitions>

                                            <TextBlock Text="{Binding Customer}"
                                           TextTrimming="CharacterEllipsis"/>

                                            <TextBlock Text="{Binding TemplateName}"
                                           Grid.Column="1"
                                           TextTrimming="CharacterEllipsis"/>

                                            <TextBlock Text="{Binding Amount}"
                                           Grid.Column="2"/>

                                            <TextBlock Text="{Binding Frequency}"
                                           Grid.Column="3"/>

                                            <TextBlock Text="{Binding NextInvoiceDateFormatted}"
                                           Grid.Column="4"/>

                                            <!-- STATUS -->
                                            <Border Grid.Column="5"
                                        CornerRadius="12"
                                        Padding="6,2"
                                        HorizontalAlignment="Center"
                                        Background="{Binding Status, Converter={StaticResource RecurringStatusToColorConverter}}">
                                                <TextBlock Text="{Binding Status}"
                                               FontSize="12"
                                               FontWeight="SemiBold"
                                               Foreground="{Binding Status, Converter={StaticResource RecurringStatusToForegroundConverter}}"/>
                                            </Border>

                                            <!-- ACTIONS -->
                                            <StackPanel Grid.Column="6"
                                            Orientation="Horizontal"
                                            Spacing="8"
                                            HorizontalAlignment="Right">

                                                <Button Content="Edit"
                                            Height="32"
                                            Width="70"
                                            CornerRadius="8"
                                            Background="#2563EB"
                                            Foreground="White"/>

                                                <Button Content="Pause"
                                            Height="32"
                                            Width="60"
                                            CornerRadius="8"
                                            Background="#F59E0B"
                                            Foreground="White"/>

                                                <Button Content="Delete"
                                            Height="32"
                                            Width="70"
                                            CornerRadius="8"
                                            Background="#EF4444"
                                            Foreground="White"/>

                                                <Button Content="View"
                                            Height="32"
                                            Width="60"
                                            CornerRadius="8"
                                            Background="#10B981"
                                            Foreground="White"/>
                                            </StackPanel>

                                        </Grid>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                        </StackPanel>
                    </ScrollViewer>
                </StackPanel>
            </Border>

        </StackPanel>
    </ScrollViewer>
    
    
</Page>
